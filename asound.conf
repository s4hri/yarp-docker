# Try Pulse first (if available)
pcm.pulse {
    type pulse
}

ctl.pulse {
    type pulse
}

# Fallback to dmix on first available card
pcm.dmixed {
    type dmix
    ipc_key 1024
    slave {
        pcm "hw:0,0"
        rate 44100
        channels 2
    }
}

# Fallback to direct hardware if dmix fails
pcm.hdware {
    type hw
    card 0
}

ctl.hdware {
    type hw
    card 0
}

# Default route: try pulse, then dmix, then hw
pcm.!default {
    type plug
    slave.pcm {
        @func getenv
        vars [ ALSA_PCM ]
        default "pulse"
    }
}

ctl.!default {
    type plug
    slave.pcm {
        @func getenv
        vars [ ALSA_CTL ]
        default "pulse"
    }
}
